<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>RedMedic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../css/blog.css">
  <link id="dynamic-favicon" rel="icon" type="image/x-icon" href="../img/favicons/favicon1.png">
	<script src="../js/particlesScript.js"></script>
  <link href="../css/montserrat.css" rel="stylesheet">
  <link href="../css/cormorant.css" rel="stylesheet">
</head>
<body>
	<div id="header">
		<div style="margin-left:20px">
		<a id="redmedic" href="index.html">RedMedic:</a>
		&nbsp
		<span id="nombre">Technical Description</span>
	</div>
	</div>

	<!--- Particulas -->
	<div id="inicio"></div>
	<div id="content">
<div style="height:10px;"></div>

<div class="apartado">
In this article I'm going to explain exactly what RedMedic is from a technical and functional point of view.
<br><br>
RedMedic is a decentralized application found in Ethereum's Blockchain.
This application manages access to patient medical data. By means of simple cryptography of public key and private key, the patient
can securely control with your digital signature who has access to your data. The objective of this project is to use this functionality as
the basis for developing more advanced applications such as a market for the purchase and sale of medical data or intelligent agreements with insurance companies.
<br><br>
If you don't know what a decentralized application is or you don't understand very well what it's for, look at yourself here: (they are put in order of difficulty)
<br><br>
1) <a href="https://youtu.be/SSo_EIwHSd4">How does a Blockchain work in 6 minutes by SimplyExplained</a><br>
2) <a href="ethereum.html">Ethereum and Smart Contracts by Oscar Balcells </a><br>
3) <a href="https://ethereum.github.io/yellowpaper/paper.pdf">Yellowpaper by Gavin Wood and Vitalik Buterin </a><br>
</div>
<div class="apartado">
<h2>Decentralized health data hub</h2>
Well, for starters, I think the most important thing understanding exactly what a decentralized health data hub is.
<br><br>
Let's get into it.
<br><br>
The first thing is to clarify that is what I mean when I say "medical data" or "health records".
<br><br>
Each patient has a profile and in that profile there's data registered about him/her.
Although it may seem obvious what you have just read, it is important to understand that RedMedic is not a simple database with many X-rays,
analytical results and other anonymized data, but it is a set of data structured in profiles and that each patient has.
<br><br>
It is also important to know that there are two types of profiles for each patient: There is the partial profile and the master profile.
The partial profile is the profile that Hospital A or Hospital B has stored about you in their database. The master profile is the result
of combining the partial profile of hospital A with the partial profile of hospital B. It sounds complicated
but the only thing to know is that the master profile is the result of aggregating all the partial profiles of a patient.
<br><br>
Why a partial profile? <br>
Your medical data is not generated in a single hospital or lab. For this reason, your data will be spread across different
databases of different health centers. There will be occasions when a person only wants to share a specific document.
and not his entire profile. This added to the fact that a health center is responsible only for the data you generate in its center
make it necessary to segment according to the origin of each of your published data.
<br><br>
And what information will there be in RedMedic about a patient? <br>
It'll be your medical record, the same one stored at the hospital. A filter will be applied to this medical record to remove irrelevant information or proprietary information of the center. Then another filter will be applied to standardize all the fields, for example if in an analysis the potassium level is measured in grams per liter, and the standard in RedMedic to measure the potassium level is minimol per liter, the conversion will be done automatically.
<br>
A resource is the smallest subdivisible unit of a health record. Each resource can belong to a certain category in this system. These are approved by the FHIR
Argonaut Standard, one of the most recent ones used by Apple, Epic and other big names.
<br>
The list of categories goes as follows: Image, Allergy/Intollerance, Lab Result, Condition, Immunization, Procedure and Medications.
There's more in the Argonaut Standard, but I only took these ones because they are more used and easier to understand & implement.
<br><br>
Now that we have more or less clarified the medical data part, we move on to the following. What is a data management system (without having to be decentralized)?
<br><br>
In this data management system (RedMedic), the permissions that each person has to access a certain information are established.
For example, if I, as a patient, frame in my RedMedic electronic profile that anyone can see my blood group and my allergies, anyone who goes
 to RedMedic will be able to see that information and for example could use it to save my life in an extreme emergency.
<br><br>
(when I say that a specific person has access I mean a person with a specific digital signature)
<br><br>
One very important thing to keep in mind is that in RedMedic there is nothing about you, but only the permissions of those who have access to them. Your medical profile is not in RedMedic, but is distributed in the databases of different health centers where you have been. RedMedic is not a medical database, it is just a system to establish who has access to according to what type of data you have.
<br><br>

Why isn't the data directly put inside the Blockchain?
<br><br>
First, because medical data is huge. They take up a lot of space, and in the inefficient Blockchains we have today, that would cost too much money. It would be a little scalable system.
<br><br>
Second, because keeping secrets in a public and open Blockchain is very complicated. Therefore, having semi-private data requires a lot of engineering and cryptography difficult to implement, audit and use.
<br><br>
And third, because the fact that the data is guarded by a hospital validates and legitimizes them. If each person uploaded their data manually, they could, for example, create many false profiles or lie in their own profile to collect more money when selling their data.
<br><br>
Decentralized? What for?
<br><br>
I've written an article just about this. <a href="blockchain.html">Here</a> I leave it to you.
</div>
<div class="apartado">
<h2>Application architecture </h2>
A decentralized application like RedMedic is composed of different Smart Contracts that have different functionalities and a decentralized frontend (you are not subordinated by a web client).
Let's start by reviewing the list of participants in RedMedic to see how each one interacts with the application.
<br><br>
<div style="text-decoration:underline;">1) Patient </div>
The patient is the user of the network and decides who has access to what. He has a private key with which he can sign his transactions that he will send to RedMedic to edit permissions. The patient therefore interacts with RedMedic in two ways: register and edit permissions.
<br><br>
Since RedMedic is a public application and open to the world, more precautions must be taken to avoid hacking the network. In order to avoid false patient from joining, the registration of a new patient will have to be done with a health provider, which will guarantee that it is a real patient. This rule makes sense since a patient will normally register with RedMedic when visiting a healthcare provider.
<br><br>
<div style="text-decoration:underline;">2) Guardian </div>
The guardian is the one who has custody of something. In this case, our guardian keeps data, data from his patients. Any health care provider can be a guardian, a hospital, a laboratory, or an insurance company. The only requirement for a health care provider to be a guardian is that they be accepted by more than 20% of the network.
Why 20%? It's an arbitrary number I've put in. The important thing is that this number is neither too small nor too large and if it were too big, competition between companies would block entry for new organizations, and if it were too small, malicious actors could infiltrate the network to sabotage it.
<br><br>
A guardian interacts with RedMedic in one of the following ways: register, vote for a new guardian, register a patient, and create a new provider-patient relationship (I'll explain next what they are).
<br><br>
Well, as you'll see, there aren't many kinds of participants either. To make the system simpler, I've only specified two, although for more advanced features you can simply create more and combine them with those that already exist. RedMedic is a very basic and modular system that serves as a basis for more complex things, as already mentioned in the introduction.
<br><br>
<h2>Actual exchange </h2>
So far you've only seen online interactions. The things that happen in RedMedic. However, the actual exchange of data is not done through Blockchain.
In the Blockchain there are only the links to the data.
The data itself resides in the databases of the health care providers, the guardians.
<br><br>
A guardian guards the profiles of his patients, the data that has been generated in his center. Each guardian will be like an API and the gateway to that API will be published in the Blockchain. A small window to which someone connects to receive data. When someone connects to ask for data, the guardian will look at that person's digital signature (the signature will be in the transaction) and if he sees that that signature has permission to access the data he asks for, the guardian will give him what he asks for.
<br><br>
The guardian's database is synchronized with the health care provider's local database. If the patient visits the center and for example an allergy is detected, the doctor will update the center's database and therefore the database linked to RedMedic will also be updated.
<br><br>
<h2>Mining </h2>

Right now, RedMedic resides in Ethereum's Blockchain. Which means that the miners in RedMedic, the ones who maintain the Blockchain, find new blocks and execute the smart contracts, are the same miners as Ethereum. However, a possible option to lower costs within the platform would be to clone Ethereum and have an independent blockchain. In this Blockchain a custom consensus protocol could be established for the platform. The most viable option for this protocol would be Proof of Authority, which very briefly means that the miners are the same guardians, who are authorities because they have had to be approved to enter.
<br><br>
<h2>Smart Contracts </h2>

This is the important part. It's the gears that make the machine work, the logic of the system. What types of smart contracts are there in RedMedic and what is each one used for?
<br><br>
1) Guardian Registration Act
<br>
When a guardian wants to register, he communicates with this smart contract and sends him his own data, such as the access door for his data, and a digital signature that corroborates that he is the organization he claims to be. The rest of the guardians will then communicate with this smart contract in order to vote whether or not they approve the new guardian. (Votes can also be automated). If the guardian is rejected, out. If approved, it is added to RedMedic's list of guardians.
<br><br>
2) Patient master profile
<br>
When you register a patient with RedMedic, what you are doing is creating a new master profile that will belong to him. There is only one master profile per patient. In the creation of this master profile, the patient's data is specified so that it can be identified only in the Blockchain (and not in real life). This master profile is a kind of aggregation of all partial patient profiles. Therefore, it has a list of references to these partial profiles.
<br><br>
3) Patient partial profile
<br>
When a new provider-patient relationship is established or RedMedic is used for the first time in this relationship, a new smart contract is created that establishes a relationship between patient A with the health care provider and caregiver B. This Smart Contract will be linked to the patient's master profile and will contain the permissions of who can access what within all the data generated in this relationship.
<br><br>
Here's a diagram that describes everything very well.
<br><br>
When you want to expand the functionality of RedMedic, you simply create new types of smart contracts.
<br><br>
<h2>Desktop application </h2>

I developed a desktop application to demonstrate the core functionality of RedMedic. In this desktop app, a patient can view their master profile, which offers a unique and organized digital profile. You can also control the permissions for each of the partial profiles you have. For example, you can let the digital signature X see a certain field of a relationship you have with a provider.
</div>

<div class="apartado">
        <button class="vuelveButton" onclick="window.location.href='index.html'">
            Back home
        </button>
</div>
<div class="apartado"><br></div>

</div>
<script src="../js/particles.js"></script>
<script src="../js/removeBanner.js"></script>
<script src="../js/dynamicFavicon.js"></script>
</body>
</html>
